<!doctype html>
<html>
<head>
<title>Responsive Interactive Canvas</title>
<script>
	  var canvas;
	  var context;
	  var timer = setInterval(doFrame, 30);
	  var circles = [];
	  var squares = [];

	  function Circle(x, y) {
	  	var colors = ["violet", "indigo", "darkmagenta", "blueviolet", "purple"];
	  	var color = colors[Math.floor(Math.random()*colors.length)];
	  	var radius = Math.floor(Math.random()*80);
		this.x = x;
	  	this.y = y;
	  	this.color = color;
	  	this.radius = radius;
	  	this.dx = Math.floor(Math.random() * 4 - 2); //x velocity
	  	this.dy = Math.floor(Math.random() * 4 - 2); //y velocity
	  }

	  function Square(x, y) {
	  	var colors = ["white", "DodgerBlue", "red"];
	  	var color = colors[Math.floor(Math.random() * colors.length)];
		this.x = x;
	  	this.y = y;
	  	this.color = color;
	  	this.dx = Math.floor(Math.random() * 4 - 2);
	  	this.dy = Math.floor(Math.random() * 4 - 2);
	  }

	  function init() {
	  	canvas = document.getElementById('canvas');
	  	context = canvas.getContext("2d");
	  	//window.addEventListener('resize', resizeCanvas, false);
	  	//window.addEventListener('orientationchange', resizeCanvas, false);
	  	//resizeCanvas();
	  	canvas.onclick = function(event) {
	  		handleClick(event.clientX, event.clientY);
	  	};
	  }

	  function drawCircle(circle) {

	  	context.beginPath();
	  	context.arc(circle.x, circle.y, circle.radius, 0, degreesToRadians(360), true);
	  	context.fillStyle = circle.color;
	  	context.globalCompositeOperation = "lighter";
	  	context.fill();
	  }
	  function updateCircle(circle) {
	  	if (circle.x + circle.dx > canvas.width || circle.x + circle.dx < 0) {
	  		circle.dx = -circle.dx;
	  	}
	  	if (circle.y + circle.dy > canvas.height || circle.y + circle.dy < 0) {
	  		circle.dy = -circle.dy;
	  	}
	  	circle.x += circle.dx;
	  	circle.y += circle.dy;
      }

	  function handleClick(x, y) {
	  	var found = false;
	  	if (!found) {
	  		if (Math.floor(Math.random()*10)%2 == 0) {
				squares.push(new Square(x, y));
			} else {
				circles.push(new Circle(x, y));
			}
	  	}
	   }
	  	function drawSquare(sq) {
	  		context.rect(sq.x, sq.y, 10, 10);
	  		context.fillStyle = sq.color;
	  		//context.globalCompositeOperation = "lighter";
	  		context.fill();
	  	}
		function updateSquare(sq) {
	  		if (sq.x + sq.dx > canvas.width || sq.x + sq.dx < 0) {
	  			sq.dx = -sq.dx;
	  		}
	  		if (sq.y + sq.dy > canvas.height || sq.y + sq.dy < 0) {
	  			sq.dy = -sq.dy;
	  		}
	  		sq.x += sq.dx;
	  		sq.y += sq.dy;
		}
        function doFrame()
		{
			fillBackgroundColor();
			updateShapes();
		}
		function updateShapes()
		{
			for (var i = 0; i < circles.length; i++) {
	  			drawCircle(circles[i]);
				updateCircle(circles[i]);
	  		}
			for (var i = 0; i < squares.length; i++) {
				drawSquare(squares[i]);
				updateSquare(squares[i]);
			}
		}
	  	function resizeCanvas() {
	  		canvas.width = window.innerWidth - 20;
	  		canvas.height = window.innerHeight - 20;
	  	}

	  	function fillBackgroundColor() {
	  		//var colors = ["white", "yellow", "blue", "red"];
	  		//var bgColor = colors[Math.floor(Math.random() * colors.length)];
			resizeCanvas();
	  		context.fillStyle = 'black';
	  		context.fillRect(0, 0, canvas.width, canvas.height);
	  	}

	  	function degreesToRadians(degrees) {
	  		return (degrees * Math.PI) / 180;
	  	}

	  	window.onload = init;
</script>
</head>
<body>
<canvas id='canvas' width=500 height=500></canvas>
</body>	  
